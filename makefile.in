CC=@CC@
CFLAGS=@CFLAGS@
BINDIR=@BINDIR@
BUILDIR=@BUILDIR@
all: $(BUILDIR)/btor2parser.o $(BUILDIR)/libbtor2parser.a $(BINDIR)/catbtor $(BINDIR)/btorsim
dirs:
	mkdir -p $(BUILDIR)
	mkdir -p $(BINDIR)
$(BUILDIR)/btor2parser.o: dirs makefile
	$(CC) $(CFLAGS) -o $@ -c btor2parser/btor2parser.c -I.
$(BUILDIR)/libbtor2parser.a: $(BUILDIR)/btor2parser.o makefile
	ar rc $@ $(BUILDIR)/btor2parser.o
	ranlib $@
$(BUILDIR)/catbtor.o: $(BUILDIR)/btor2parser.o makefile
	$(CC) $(CFLAGS) -o $@ -c catbtor.c -I.
$(BINDIR)/catbtor: dirs $(BUILDIR)/catbtor.o $(BUILDIR)/libbtor2parser.a makefile
	$(CC) $(CFLAGS) -o $@ $(BUILDIR)/catbtor.o -L$(BUILDIR) -lbtor2parser
$(BUILDIR)/btorsimrng.o: dirs makefile
	$(CC) $(CFLAGS) -o $@ -c btorsim/btorsimrng.c -Ibtorsim
$(BUILDIR)/btorsimbv.o: $(BUILDIR)/btorsimrng.o makefile
	$(CC) $(CFLAGS) -o $@ -c btorsim/btorsimbv.c -I.
$(BUILDIR)/btorsim.o: $(BUILDIR)/btorsimbv.o $(BUILDIR)/libbtor2parser.a makefile
	$(CC) $(CFLAGS) -o $@ -c btorsim/btorsimmain.c -Ibtorsim -I.
$(BINDIR)/btorsim: dirs $(BUILDIR)/btorsim.o makefile
	$(CC) $(CFLAGS) -o $@ $(BUILDIR)/btorsim.o $(BUILDIR)/btorsimbv.o $(BUILDIR)/btorsimrng.o -L$(BUILDIR) -lbtor2parser
clean:
	rm -f makefile
	rm -rf build
	rm -rf bin
	rm -f tests/*.log
	rm -f *.gcno *.gcov *.gcda
